<div style="max-width: 900px; margin: 0 auto;">
  <%= form_with(model: client) do |form| %>
    <% if client.errors.any? %>
      <div style="background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; border-radius: 4px; padding: 1rem; margin-bottom: 1.5rem;">
        <h2 style="font-weight: 600; margin-bottom: 0.5rem;"><%= pluralize(client.errors.count, "error") %> prohibited this client from being saved:</h2>
        <ul style="margin: 0; padding-left: 1.5rem;">
          <% client.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <!-- Basic Information -->
    <div class="card">
      <h2>Basic Information</h2>
      <div>
        <%= form.label :name, "Business Name", class: "block font-medium mb-1" %>
        <%= form.text_field :name, style: "width: 100%;" %>
      </div>
    </div>

    <!-- Contact Information -->
    <div class="card" data-controller="collapsible">
      <div style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;" data-action="click->collapsible#toggle">
        <h2 style="margin: 0;"><i class="bi bi-chevron-down" data-collapsible-target="icon"></i> Contact Information</h2>
      </div>
      <div data-collapsible-target="content" style="margin-top: 1rem;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div>
            <%= form.label :first_name, class: "block font-medium mb-1" %>
            <%= form.text_field :first_name, style: "width: 100%;" %>
          </div>
          <div>
            <%= form.label :last_name, class: "block font-medium mb-1" %>
            <%= form.text_field :last_name, style: "width: 100%;" %>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div>
            <%= form.label :email, class: "block font-medium mb-1" %>
            <%= form.email_field :email, style: "width: 100%;" %>
          </div>
          <div>
            <%= form.label :phone, class: "block font-medium mb-1" %>
            <%= form.text_field :phone, style: "width: 100%;" %>
          </div>
        </div>
      </div>
    </div>

    <!-- Address -->
    <div class="card" data-controller="collapsible">
      <div style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;" data-action="click->collapsible#toggle">
        <h2 style="margin: 0;"><i class="bi bi-chevron-down" data-collapsible-target="icon"></i> Address</h2>
      </div>
      <div data-collapsible-target="content" style="margin-top: 1rem;">
        <div style="display: grid; gap: 1rem;">
          <div>
            <%= form.label :address_line1, class: "block font-medium mb-1" %>
            <%= form.text_field :address_line1, style: "width: 100%;" %>
          </div>
          <div>
            <%= form.label :address_line2, class: "block font-medium mb-1" %>
            <%= form.text_field :address_line2, style: "width: 100%;" %>
          </div>
          <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 1rem;">
            <div>
              <%= form.label :city, class: "block font-medium mb-1" %>
              <%= form.text_field :city, style: "width: 100%;" %>
            </div>
            <div>
              <%= form.label :state, class: "block font-medium mb-1" %>
              <%= form.text_field :state, style: "width: 100%;" %>
            </div>
            <div>
              <%= form.label :zip_code, class: "block font-medium mb-1" %>
              <%= form.text_field :zip_code, style: "width: 100%;" %>
            </div>
          </div>
          <div>
            <%= form.label :country, class: "block font-medium mb-1" %>
            <%= form.text_field :country, style: "width: 100%;" %>
          </div>
        </div>
      </div>
    </div>

    <!-- Notes -->
    <div class="card" data-controller="collapsible">
      <div style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;" data-action="click->collapsible#toggle">
        <h2 style="margin: 0;"><i class="bi bi-chevron-down" data-collapsible-target="icon"></i> Notes</h2>
      </div>
      <div data-collapsible-target="content" style="margin-top: 1rem;">
        <div>
          <%= form.label :notes, class: "block font-medium mb-1" %>
          <%= form.rich_text_area :notes %>
        </div>
      </div>
    </div>

    <div style="display: flex; gap: 1rem;">
      <%= form.submit client.persisted? ? "Update Client" : "Create Client", class: "btn" %>
      <%= link_to "Cancel", clients_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>
