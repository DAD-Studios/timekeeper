<div style="max-width: 800px; margin: 0 auto;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h1 style="margin: 0;">Time Entry Details</h1>
    <%= link_to time_entries_path, class: "btn-secondary" do %>
      <i class="bi bi-arrow-left"></i> Back to History
    <% end %>
  </div>

  <!-- Status Badge -->
  <div style="margin-bottom: 2rem;">
    <% if @time_entry.invoice.present? && @time_entry.invoice.paid? %>
      <span style="background: #d1ecf1; color: #0c5460; padding: 0.5rem 1rem; border-radius: 4px; font-size: 14px; font-weight: 500;">
        <i class="bi bi-cash-coin"></i> Paid
      </span>
    <% elsif @time_entry.invoice.present? %>
      <span style="background: #d4edda; color: #155724; padding: 0.5rem 1rem; border-radius: 4px; font-size: 14px; font-weight: 500;">
        <i class="bi bi-check-circle"></i> Invoiced
      </span>
    <% else %>
      <span style="background: #fff3cd; color: #856404; padding: 0.5rem 1rem; border-radius: 4px; font-size: 14px; font-weight: 500;">
        <i class="bi bi-clock"></i> Unbilled
      </span>
    <% end %>
  </div>

  <!-- Time Entry Details -->
  <div style="background: white; padding: 2rem; border-radius: 8px; border: 1px solid #e1e8ed; margin-bottom: 2rem;">
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
      <!-- Left Column -->
      <div>
        <div style="margin-bottom: 1.5rem;">
          <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Task</h3>
          <p style="font-size: 18px; margin: 0; font-weight: 500;"><%= @time_entry.task %></p>
        </div>

        <div style="margin-bottom: 1.5rem;">
          <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Client</h3>
          <p style="margin: 0;"><%= @time_entry.client.name %></p>
        </div>

        <div style="margin-bottom: 1.5rem;">
          <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Project</h3>
          <p style="margin: 0;"><%= @time_entry.project.name %></p>
        </div>
      </div>

      <!-- Right Column -->
      <div>
        <div style="margin-bottom: 1.5rem;">
          <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Start Time</h3>
          <p style="margin: 0;"><%= @time_entry.rounded_start_time&.strftime("%B %d, %Y at %I:%M %p") %></p>
        </div>

        <div style="margin-bottom: 1.5rem;">
          <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">End Time</h3>
          <p style="margin: 0;"><%= @time_entry.rounded_end_time&.strftime("%B %d, %Y at %I:%M %p") %></p>
        </div>

        <div style="margin-bottom: 1.5rem;">
          <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Duration</h3>
          <p style="margin: 0; font-size: 18px; font-weight: 500;">
            <%= sprintf('%.2f', @time_entry.duration_in_hours) %> hours
            <span style="color: #5a6c7d; font-size: 14px; font-weight: 400; margin-left: 0.5rem;">
              (<%= Time.at(@time_entry.duration_seconds).utc.strftime("%H:%M:%S") if @time_entry.duration_seconds %>)
            </span>
          </p>
        </div>
      </div>
    </div>

    <!-- Full Width Section -->
    <div style="border-top: 1px solid #e1e8ed; padding-top: 1.5rem; margin-top: 1.5rem;">
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
        <div>
          <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Rate</h3>
          <p style="margin: 0; font-size: 18px;"><%= number_to_currency(@time_entry.rate) %> / hour</p>
        </div>

        <div>
          <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Earnings</h3>
          <p style="margin: 0; font-size: 24px; font-weight: 600; color: #5cb85c;"><%= number_to_currency(@time_entry.earnings) %></p>
        </div>
      </div>
    </div>

    <% if @time_entry.notes.present? %>
      <div style="border-top: 1px solid #e1e8ed; padding-top: 1.5rem; margin-top: 1.5rem;">
        <h3 style="color: #5a6c7d; font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Notes</h3>
        <div style="background: #f5f7fa; padding: 1rem; border-radius: 4px;">
          <%= @time_entry.notes %>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Action Buttons -->
  <div style="display: flex; gap: 1rem; justify-content: flex-end;">
    <% unless @time_entry.paid? %>
      <%= link_to edit_time_entry_path(@time_entry), class: "btn" do %>
        <i class="bi bi-pencil"></i> Edit Time Entry
      <% end %>
    <% end %>

    <%= button_to time_entry_path(@time_entry),
        method: :delete,
        class: "btn-danger",
        data: { turbo_confirm: "Are you sure you want to delete this time entry? This action cannot be undone." } do %>
      <i class="bi bi-trash"></i> Delete Time Entry
    <% end %>
  </div>

  <% if @time_entry.paid? %>
    <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 1rem; border-radius: 4px; margin-top: 1rem;">
      <strong><i class="bi bi-info-circle"></i> Note:</strong> This time entry is associated with a paid invoice. Editing is limited to protect financial records.
    </div>
  <% end %>
</div>
